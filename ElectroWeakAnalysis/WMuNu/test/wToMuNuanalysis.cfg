process wToMuNuMET = {
      #include "FWCore/MessageLogger/data/MessageLogger.cfi"

      service = MessageLogger {
          untracked vstring destinations = { "cout" }
          untracked vstring categories = {"FwkJob", "FwkReport", "FwkSummary", "Root_NoDictionary"}
          untracked PSet cout = {
                    untracked string threshold = "DEBUG"
          }
          untracked vstring debugModules = { "wMuNuSelFilter", "" }
      }

      service = AdaptorConfig {}

      untracked PSet options = {
               untracked bool wantSummary = true
               untracked bool makeTriggerResults = true }

      untracked PSet maxEvents = { untracked int32 input = 1000 }

      source = PoolSource {
            untracked vstring fileNames = {
            '/store/mc/2007/10/19/CSA07-Wmunu-1192835438/0005/00590CD1-7C87-DC11-85A4-0019B9E4FD8E.root'
            }
            untracked uint32 debugVerbosity = 0
            untracked bool   debugFlag     = false
      }
      include "ElectroWeakAnalysis/WMuNu/test/ReReco10pb.cff"

      service = TFileService { 
	 string fileName = "/tmp/antoniov/wToMuNuTree.root"
      }

      # Conversion to GenParticles
      include "PhysicsTools/HepMCCandAlgos/data/genParticleCandidates2GenParticles.cfi"
      path genparticles = {genParticles}

      # Muon corrections for MET
      //include "JetMETCorrections/Type1MET/data/MetMuonCorrections.cff"           
      //path muonMETcorr = {MetMuonCorrections}

      # Jet corrections for MET
      //es_source MCJetCorrectorIcone5 = MCJetCorrectionService {
      //      string tagName = 'CMSSW_152_iterativeCone5'
      //      string label = 'MCJetCorrectorIcone5' 
      //}
      #include "JetMETCorrections/Type1MET/data/MetType1Corrections.cff"
      #replace corMetType1Icone5.inputUncorMetLabel = "corMetGlobalMuons"
      #path jetMETcorr = {corMetType1Icone5}
      //module corMetMuonCorrJetCorr = corMetType1Icone5 from "JetMETCorrections/Type1MET/data/MetType1Corrections.cff"	
      //replace corMetMuonCorrJetCorr.inputUncorMetLabel = "corMetGlobalMuons"
      //path jetMETcorr = {corMetMuonCorrJetCorr}
			
      # HLT paths
      include "ElectroWeakAnalysis/WReco/data/wToMuNuHLTPaths.cfi"	

      # Selection used for AN Note 2007/031
      include "ElectroWeakAnalysis/WMuNu/data/WMuNuSel_16x.cff"
      replace wMuNuSelFilter.MassTMin = 0.0
      replace wMuNuSelFilter.IsoCut = 9999.9	
      //replace wMuNuSelFilter.UseNormalizedIso = true
	
      sequence wToMuNuselection = { wToMuNuHLTFilter, wmunusel }

      # Wmunu  Analyzer
      module wToMuNuanalysis = WMuNuAnalyzer {
            InputTag GenParticleTag = genParticles
            InputTag MuonTag = muons
	    InputTag IsoTag = muGlobalIsoDepositCtfTk	   
            InputTag GenMETTag = genMetNoNuBSM
	    InputTag METTag = met	

	    double IsoCone = 0.3	
      }

      path analysis = { wToMuNuselection, wToMuNuanalysis}

      schedule = { genparticles, analysis }	
}
